<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Validate observed values — rict_validate • rict</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Validate observed values — rict_validate"><meta name="description" content="Low level function to validate input `data`. Returns list of dataframes
containing fails/warnings/replacements and passing observed values. The
function detects which model (gis or physical) and area (GB &amp;amp; NI) and applies
validation rules as required. Here is a summary of checks:
Input 'data' exists.
Input is dataframe.
Required columns are present.
Columns have correct class.
Conditional columns if present are correct class.
Where multiple classes are allowed, convert columns to
 standardised class for example integer to numeric.
Assess if model 'gis' (model 44) or 'physical' (model 1) based on
 input columns.
Assess if input 'gb' or 'ni' based grid reference.
Additional columns/variables calculated for example mean temperate.
Logs failures and warnings applied using `validation_rules` table.
Replace values if input values is zero (or close to zero) to avoid
 log10(0) and related errors.
Returns dataframe with passing values, notes on warnings, fails,
 replacements. And model and area parameters.

"><meta property="og:description" content="Low level function to validate input `data`. Returns list of dataframes
containing fails/warnings/replacements and passing observed values. The
function detects which model (gis or physical) and area (GB &amp;amp; NI) and applies
validation rules as required. Here is a summary of checks:
Input 'data' exists.
Input is dataframe.
Required columns are present.
Columns have correct class.
Conditional columns if present are correct class.
Where multiple classes are allowed, convert columns to
 standardised class for example integer to numeric.
Assess if model 'gis' (model 44) or 'physical' (model 1) based on
 input columns.
Assess if input 'gb' or 'ni' based grid reference.
Additional columns/variables calculated for example mean temperate.
Logs failures and warnings applied using `validation_rules` table.
Replace values if input values is zero (or close to zero) to avoid
 log10(0) and related errors.
Returns dataframe with passing values, notes on warnings, fails,
 replacements. And model and area parameters.

"><meta name="robots" content="noindex"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">rict</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">3.1.10</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/functional-specification.html">River Invertebrate Classification Tool (RICT) Functional Specification</a></li>
    <li><a class="dropdown-item" href="../articles/tech-demo-temperature-change.html">Tech demo: Temperature change</a></li>
    <li><a class="dropdown-item" href="../articles/user-guide.html">User Guide</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/aquaMetrics/rict/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Validate observed values</h1>
      <small class="dont-index">Source: <a href="https://github.com/aquaMetrics/rict/blob/master/R/rict-validate.R" class="external-link"><code>R/rict-validate.R</code></a></small>
      <div class="d-none name"><code>rict_validate.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Low level function to validate input `data`. Returns list of dataframes
containing fails/warnings/replacements and passing observed values. The
function detects which model (gis or physical) and area (GB &amp; NI) and applies
validation rules as required. Here is a summary of checks:</p><ol><li><p>Input 'data' exists.</p></li>
<li><p>Input is dataframe.</p></li>
<li><p>Required columns are present.</p></li>
<li><p>Columns have correct class.</p></li>
<li><p>Conditional columns if present are correct class.</p></li>
<li><p>Where multiple classes are allowed, convert columns to
 standardised class for example integer to numeric.</p></li>
<li><p>Assess if model 'gis' (model 44) or 'physical' (model 1) based on
 input columns.</p></li>
<li><p>Assess if input 'gb' or 'ni' based grid reference.</p></li>
<li><p>Additional columns/variables calculated for example mean temperate.</p></li>
<li><p>Logs failures and warnings applied using `validation_rules` table.</p></li>
<li><p>Replace values if input values is zero (or close to zero) to avoid
 log10(0) and related errors.</p></li>
<li><p>Returns dataframe with passing values, notes on warnings, fails,
 replacements. And model and area parameters.</p></li>
</ol></div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">rict_validate</span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  row <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  stop_if_all_fail <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  area <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  crs <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>dataframe of observed environmental variables</p><dl><dt>SITE</dt>
<dd><p>Site identifier</p></dd>

  <dt>Waterbody</dt>
<dd><p>Water body identifier</p></dd>

  ...

</dl></dd>


<dt id="arg-row">row<a class="anchor" aria-label="anchor" href="#arg-row"></a></dt>
<dd><p>Boolean - if set to `TRUE` returns the row number from the input file
(data) for each check. This makes linking checks (fails/warns etc) to the
associated row in the input data easier. This is more relevant if multiple
samples from the same site and year are input as separate row to the
`rict_validate`. In this case, SITE and YEAR are not enough to link
validation checks to specific rows in the input data.</p></dd>


<dt id="arg-stop-if-all-fail">stop_if_all_fail<a class="anchor" aria-label="anchor" href="#arg-stop-if-all-fail"></a></dt>
<dd><p>Boolean - if set to `FALSE` the validation function
will return empty dataframe for valid `data`. This is useful if you want to
run validation checks without stopping process.</p></dd>


<dt id="arg-area">area<a class="anchor" aria-label="anchor" href="#arg-area"></a></dt>
<dd><p>Area is by detected by default from the NGR, but you can provide
the area parameter either 'iom', 'gb, 'ni' for testing purposes.</p></dd>


<dt id="arg-crs">crs<a class="anchor" aria-label="anchor" href="#arg-crs"></a></dt>
<dd><p>optionally set crs to `29903` for Irish projection system.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>List of dataframes and other parameters:</p><dl><dt>data</dt>
<dd><p>Dataframe of input data that passes validation rules</p></dd>

  <dt>checks</dt>
<dd><p>Dataframe listing fails, warnings and replacements</p></dd>

  <dt>model</dt>
<dd><p>Returns model detected based on columns in input file</p></dd>

  <dt>area</dt>
<dd><p>Returns area detected base don Grid Reference in input file</p></dd>


</dl></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="va">validations</span> <span class="op">&lt;-</span> <span class="fu">rict_validate</span><span class="op">(</span><span class="va">demo_observed_values</span>, row <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Maybin Muyeba, Tim Foster, Tim Loveday.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

